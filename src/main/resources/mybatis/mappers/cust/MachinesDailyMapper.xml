<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.scott.fu.dao.oee.MachinesDailyMapper">
    <resultMap id="BaseResultMap" type="MachinesDaily">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        <id column="ID" property="id" jdbcType="BIGINT"/>
        <result column="Date" property="date" jdbcType="CHAR"/>
        <result column="Resource" property="resource" jdbcType="CHAR"/>
        <result column="State" property="state" jdbcType="CHAR"/>
        <result column="StateReason" property="statereason" jdbcType="CHAR"/>
        <result column="Duration" property="duration" jdbcType="INTEGER"/>
        <result column="createtime" property="createtime" jdbcType="TIMESTAMP"/>
    </resultMap>

<!--    <resultMap id="MaterialTAndMHistoryResultMap" type="MaterialTAndMHistory">
        <result column="StepSeqNumber" property="stepSeqNumber" jdbcType="CHAR"/>
        <result column="ResourceName" property="resourceName" jdbcType="CHAR"/>
        <result column="MaterialName" property="materialName" jdbcType="CHAR"/>
        <result column="StepName" property="stepName" jdbcType="CHAR"/>
        <result column="OperationName" property="operationName" jdbcType="CHAR"/>
        <result column="OperationStartTime" property="operationStartTime" jdbcType="TIMESTAMP"/>
        <result column="OperationHourly" property="operationHourly" jdbcType="CHAR"/>
        <result column="OperationEndTime" property="operationEndTime" jdbcType="TIMESTAMP"/>
        <result column="PrimaryUnits" property="primaryUnits" jdbcType="CHAR"/>
        <result column="StepPrimaryUnits" property="stepPrimaryUnits" jdbcType="CHAR"/>
        <result column="PrimaryQuantity" property="primaryQuantity" jdbcType="CHAR"/>
        <result column="SubMaterialsPrimaryQuantity" property="subMaterialsPrimaryQuantity" jdbcType="CHAR"/>
        <result column="SecondaryUnits" property="secondaryUnits" jdbcType="CHAR"/>
        <result column="StepSecondaryUnits" property="stepSecondaryUnits" jdbcType="CHAR"/>
        <result column="SecondaryQuantity" property="secondaryQuantity" jdbcType="CHAR"/>
        <result column="SubMaterialsSecondaryQuantity" property="subMaterialsSecondaryQuantity" jdbcType="CHAR"/>
        <result column="MeasuredQuantity" property="measuredQuantity" jdbcType="CHAR"/>
    </resultMap>-->

    <resultMap id="MaterialTAndMHistoryResultMap" type="MaterialTAndMHistory">
        <result column="Daily" property="daily" jdbcType="CHAR"/>
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="M_CODE" property="m_CODE" jdbcType="CHAR"/>
        <result column="TITLE" property="tITLE" jdbcType="CHAR"/>
        <result column="TARGET" property="tARGET" jdbcType="CHAR"/>
        <result column="OUTPUT_FORM" property="oUTPUT_FORM" jdbcType="CHAR"/>
        <result column="WIP_FORM" property="wIP_FORM" jdbcType="CHAR"/>
        <result column="OutputQuantity" property="outputQuantity" jdbcType="CHAR"/>
        <result column="MeasuredQuantity" property="measuredQuantity" jdbcType="CHAR"/>
        <result column="WIPLots" property="wIPLots" jdbcType="CHAR"/>
        <result column="WIPQuantity" property="wIPQuantity" jdbcType="CHAR"/>
    </resultMap>

    <!--
    <resultMap id="LACTrackOutAndWIPMap" type="LACTrackOutAndWIP">
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="LACOutput" property="LACTrackOut" jdbcType="CHAR"/>
        <result column="LACWIP" property="LACWIP" jdbcType="CHAR"/>
    </resultMap>

    <resultMap id="PRFTrackOutAndWIPMap" type="PRFTrackOutAndWIP">
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="DNVOutput" property="DNVTrackOut" jdbcType="CHAR"/>
        <result column="DNVWIP" property="DNVWIP" jdbcType="CHAR"/>
        <result column="TNVOutput" property="TNVTrackOut" jdbcType="CHAR"/>
        <result column="TNVWIP" property="TNVWIP" jdbcType="CHAR"/>
    </resultMap>
    <resultMap id="QVMTrackOutAndWIPMap" type="QVMTrackOutAndWIP">
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="PQVOutput" property="PQVTrackOut" jdbcType="CHAR"/>
        <result column="PQVWIP" property="PQVWIP" jdbcType="CHAR"/>
        <result column="VQVOutput" property="VQVTrackOut" jdbcType="CHAR"/>
        <result column="VQVWIP" property="VQVWIP" jdbcType="CHAR"/>
    </resultMap>

    <resultMap id="BFLTrackOutAndWIPMap" type="BFLTrackOutAndWIP">
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="BFYOutput" property="BFLTrackOut" jdbcType="CHAR"/>
        <result column="BFYWIP" property="BFLWIP" jdbcType="CHAR"/>
    </resultMap>

    <resultMap id="LACTrackOutAndWIPMap" type="LACTrackOutAndWIP">
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="LACOutput" property="LACTrackOut" jdbcType="CHAR"/>
        <result column="LACWIP" property="LACWIP" jdbcType="CHAR"/>
    </resultMap>

    <resultMap id="UballTrackOutAndWIPMap" type="UballTrackOutAndWIP">
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="UBYOutput" property="UballTrackOut" jdbcType="CHAR"/>
        <result column="UBYWIP" property="UballWIP" jdbcType="CHAR"/>
    </resultMap>
    <resultMap id="DefluxTrackOutAndWIPMap" type="DefluxTrackOutAndWIP">
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="DFXOutput" property="DefluxTrackOut" jdbcType="CHAR"/>
        <result column="DFXWIP" property="DefluxWIP" jdbcType="CHAR"/>
    </resultMap>

    <resultMap id="AVRTrackOutAndWIPMap" type="AVRTrackOutAndWIP">
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="AVROutput" property="AVRTrackOut" jdbcType="CHAR"/>
        <result column="AVRWIP" property="AVRWIP" jdbcType="CHAR"/>
    </resultMap>

    <resultMap id="DicingTrackOutAndWIPMap" type="DicingTrackOutAndWIP">
        <result column="Hourly" property="hourly" jdbcType="CHAR"/>
        <result column="DICOutput" property="DicingTrackOut" jdbcType="CHAR"/>
        <result column="DICWIP" property="DicingWIP" jdbcType="CHAR"/>
    </resultMap>-->

    <select id="selectUnionByResName" resultMap="BaseResultMap">
      SELECT * FROM
      (
          SELECT
            *
          FROM [ProductionCustomDB].[OEE].[V_MachinesDaily] B
          WHERE  B.[Resource] = #{resName}
          AND B.createtime >= #{timeStart} AND B.createtime &lt;#{timeEnd}
      UNION
          SELECT
          TOP 1 *  FROM [ProductionCustomDB].[OEE].[V_MachinesDaily] A
          WHERE  A.[Resource] = #{resName}
          AND A.createtime &lt;= #{timeStart}
          ORDER BY A.createtime DESC
      ) C
      ORDER BY C.createtime DESC
  </select>

    <select id="selectMaterialTAndMHistory"
            resultMap="MaterialTAndMHistoryResultMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_History_Ext] #{startTime},#{endTime},#{title}
    </select>

    <!--===================================================================-->
    <!--<select id="selectStepTrackOutWIPPRF"
            resultMap="PRFTrackOutAndWIPMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_WIPOutputChart] #{title}
    </select>

    <select id="selectStepTrackOutWIPQVM"
            resultMap="QVMTrackOutAndWIPMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_WIPOutputChart] #{title}
    </select>

    <select id="selectStepTrackOutWIPDicing"
            resultMap="DicingTrackOutAndWIPMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_WIPOutputChart] #{title}
    </select>

    <select id="selectStepTrackOutWIPDfx"
            resultMap="DefluxTrackOutAndWIPMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_WIPOutputChart] #{title}
    </select>

    <select id="selectStepTrackOutWIPUby"
            resultMap="UballTrackOutAndWIPMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_WIPOutputChart] #{title}
    </select>

    <select id="selectStepTrackOutWIPBFL"
            resultMap="BFLTrackOutAndWIPMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_WIPOutputChart] #{title}
    </select>

    <select id="selectStepTrackOutWIPAVR"
            resultMap="AVRTrackOutAndWIPMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_WIPOutputChart] #{title}
    </select>

    <select id="selectStepTrackOutWIPLAC"
            resultMap="LACTrackOutAndWIPMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_WIPOutputChart] #{title}
    </select>-->

    <!--===================================================================-->


    <select id="selectStepTrackoutAndWip"
            resultMap="MaterialTAndMHistoryResultMap"
            statementType="CALLABLE">
        EXEC [Dashboard].[Dashboard_Equipment_History_Ext] #{startTime},#{endTime},#{title}
    </select>


    <sql id="Example_Where_Clause">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" suffix=")" prefixOverrides="and">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach collection="criterion.value" item="listItem" open="(" close=")"
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Update_By_Example_Where_Clause">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        <where>
            <foreach collection="example.oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" suffix=")" prefixOverrides="and">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach collection="criterion.value" item="listItem" open="(" close=")"
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        ID, Date, Resource, State, StateReason, Duration, createtime
    </sql>
    <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.scott.fu.entity.oee.MachinesDailyExample">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        select
        <if test="distinct">
            distinct
        </if>
        <include refid="Base_Column_List"/>
        from OEE.MachinesDaily
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${orderByClause}
        </if>
    </select>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        select
        <include refid="Base_Column_List"/>
        from OEE.MachinesDaily
        where ID = #{id,jdbcType=BIGINT}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        delete from OEE.MachinesDaily
        where ID = #{id,jdbcType=BIGINT}
    </delete>
    <delete id="deleteByExample" parameterType="com.scott.fu.entity.oee.MachinesDailyExample">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        delete from OEE.MachinesDaily
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </delete>
    <insert id="insert" parameterType="com.scott.fu.entity.oee.MachinesDaily">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        insert into OEE.MachinesDaily (ID, Date, Resource,
        State, StateReason, Duration,
        createtime)
        values (#{id,jdbcType=BIGINT}, #{date,jdbcType=CHAR}, #{resource,jdbcType=CHAR},
        #{state,jdbcType=CHAR}, #{statereason,jdbcType=CHAR}, #{duration,jdbcType=INTEGER},
        #{createtime,jdbcType=TIMESTAMP})
    </insert>
    <insert id="insertSelective" parameterType="com.scott.fu.entity.oee.MachinesDaily">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        insert into OEE.MachinesDaily
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                ID,
            </if>
            <if test="date != null">
                Date,
            </if>
            <if test="resource != null">
                Resource,
            </if>
            <if test="state != null">
                State,
            </if>
            <if test="statereason != null">
                StateReason,
            </if>
            <if test="duration != null">
                Duration,
            </if>
            <if test="createtime != null">
                createtime,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="date != null">
                #{date,jdbcType=CHAR},
            </if>
            <if test="resource != null">
                #{resource,jdbcType=CHAR},
            </if>
            <if test="state != null">
                #{state,jdbcType=CHAR},
            </if>
            <if test="statereason != null">
                #{statereason,jdbcType=CHAR},
            </if>
            <if test="duration != null">
                #{duration,jdbcType=INTEGER},
            </if>
            <if test="createtime != null">
                #{createtime,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <select id="countByExample" parameterType="com.scott.fu.entity.oee.MachinesDailyExample"
            resultType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        select count(*) from OEE.MachinesDaily
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </select>
    <update id="updateByExampleSelective" parameterType="map">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        update OEE.MachinesDaily
        <set>
            <if test="record.id != null">
                ID = #{record.id,jdbcType=BIGINT},
            </if>
            <if test="record.date != null">
                Date = #{record.date,jdbcType=CHAR},
            </if>
            <if test="record.resource != null">
                Resource = #{record.resource,jdbcType=CHAR},
            </if>
            <if test="record.state != null">
                State = #{record.state,jdbcType=CHAR},
            </if>
            <if test="record.statereason != null">
                StateReason = #{record.statereason,jdbcType=CHAR},
            </if>
            <if test="record.duration != null">
                Duration = #{record.duration,jdbcType=INTEGER},
            </if>
            <if test="record.createtime != null">
                createtime = #{record.createtime,jdbcType=TIMESTAMP},
            </if>
        </set>
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByExample" parameterType="map">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        update OEE.MachinesDaily
        set ID = #{record.id,jdbcType=BIGINT},
        Date = #{record.date,jdbcType=CHAR},
        Resource = #{record.resource,jdbcType=CHAR},
        State = #{record.state,jdbcType=CHAR},
        StateReason = #{record.statereason,jdbcType=CHAR},
        Duration = #{record.duration,jdbcType=INTEGER},
        createtime = #{record.createtime,jdbcType=TIMESTAMP}
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByPrimaryKeySelective" parameterType="com.scott.fu.entity.oee.MachinesDaily">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        update OEE.MachinesDaily
        <set>
            <if test="date != null">
                Date = #{date,jdbcType=CHAR},
            </if>
            <if test="resource != null">
                Resource = #{resource,jdbcType=CHAR},
            </if>
            <if test="state != null">
                State = #{state,jdbcType=CHAR},
            </if>
            <if test="statereason != null">
                StateReason = #{statereason,jdbcType=CHAR},
            </if>
            <if test="duration != null">
                Duration = #{duration,jdbcType=INTEGER},
            </if>
            <if test="createtime != null">
                createtime = #{createtime,jdbcType=TIMESTAMP},
            </if>
        </set>
        where ID = #{id,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.scott.fu.entity.oee.MachinesDaily">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 29 10:52:03 CST 2015.
        -->
        update OEE.MachinesDaily
        set Date = #{date,jdbcType=CHAR},
        Resource = #{resource,jdbcType=CHAR},
        State = #{state,jdbcType=CHAR},
        StateReason = #{statereason,jdbcType=CHAR},
        Duration = #{duration,jdbcType=INTEGER},
        createtime = #{createtime,jdbcType=TIMESTAMP}
        where ID = #{id,jdbcType=BIGINT}
    </update>
</mapper>



